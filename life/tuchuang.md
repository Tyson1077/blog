title:准备使用图床
date:21:26 2013/6/6

想使用自己的web版本的markdown编辑器<http://chunpu.github.io/markdown>.不想再用又坑爹又大的markdownpad2了.

我的编辑器非常不完善,但是至少能用了,唯一的问题是图片.网页版的图片除非上传图片,否则没法引用图片.有一个无奈又想想觉得好的方法,就是使用图床,图床的话就直接把图片路径定死了,不再使用相对路径.

这是非常好的,因为要知道相对路径的话不同页面想显示图片都要用丑陋的正则把路径改对.

我写博客图片极少,有一大原因就是图片是放在博客一起的,也通过git托管,git变得很大.每次都觉得会占很多空间.

所以用图床的好处是省了不少空间,这样的话我的git将全部是文字,图片和静态演示网页都扔到托管里.

那么图床选哪个呢?可以选择的3个:

1. 又拍云存储,七牛云存储: 这俩个都非常专业,特别是又拍云专门搞图床的,可以多种格式大小的图片,但这俩都有很大的缺点,首页看不到直接的价格,也就是没有明码标价,总觉得是给企业用的,其实这确实不适合个人用户.

2. dropbox本来有public文件夹,可以放出外链,只需要dns配置cname用起来很爽,现在的问题是dropbox貌似提供这功能.而且即便能用,dropbox随时面临被封ip的风险,而且速度慢.

3. 阿里云存储oss.这个我很早就写过nodejs的sdk.速度都非常不错,而且直接的文件名外链,域名+文件,域名是很长的子域名,这无所谓,反正要cname的.很多人看到阿里云要收费直接退缩了.其实阿里云可能是最便宜的,我放了不少文件,但是下载很少,收费就是0元.

通过比较我已然是选择了阿里云oss.还是说下阿里云的一般的计费吧.

- 存储空间: `0.6元/GB*每月`(`0.02 元/GB * 天`)

- 流入流量: 免费

- 流出流量: 0.75元/GB

这儿还有个阿里云的扣费说明,解释了为什么我一直是0元:

> 请求次数最小计量单位1万次，当日请求数不足1万次的使用量，将不进行扣费。
存储空间与外网流出流量以Gb为单位进行核算，当日扣费金额=实际使用量*单价(Gb)，扣费最小面额0.01元，不足0.01元面额不进行扣费

阿里云是每日结算一次,而存储空间+外网流量加起来要满0.01才扣费.

	每天扣费 = 存储空间*0.02 + 一天流出流量*0.75

要满0.01,需要存满500M或者10m+的流出才会开始计费,如果你的网站或者博客访问量少的和我一样的话,完全可以使用阿里云存储,都不需要担心钱的问题.

试想一下0.75元要1g流量才可以,就算一个网站大到2M,也被访问了500次,那也该笑了.

最后要说下,用云存储,不需要担心图片,css这些缓存设置,并不需要专门去设置expires或者cache-control之类的,因为云存储都有LastModified这个http头,会自动返回304 not modified.不过还是有些问题的,就是浏览器还是要去请求head.速度还是会不如直接在缓存中的快.这个时候只能给自己关键的css设置cache-control了.

> 对了,css如何区分版本,就是用md5的值作为css的文件名,在oss中ETAG貌似就是md5值

>> ETAG是http的标准首部,用来记录文件版本或者文件标签的.

如果是自己的服务器最好还是用querystring比较好,也就是`style.css?v=x.y.z`这种.

以后图片呀音乐啦,都可以随便加到博客上了,不再担心容量问题了.

试一下啦.

![](http://fimg.oss.aliyuncs.com/life/aliyun.jpg)








