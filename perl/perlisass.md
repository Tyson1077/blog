title:Perl is a Real Ass
date:21:22 2013/3/21
tag:perl

今天势必要吐槽一下perl了。。

###1. cpan 就是一坨

cpan是perl的包管理

今日收到任务，用perl写个配置界面。

我第一步就卡住了，需要读一个linux的.conf配置文件。

像cpan这种军火库，不可能连.conf的parser都没。

果然一下子就找到了，可惜的是我纠结了好几个小时也没能从cpan上搞下来

直接make也失败了。

你说直接用.pm文件？哦 my god 它解析个这个还用了libconfig.h

话说都已经有这个库了，还要你写什么。

总之linux个各种依赖，每次编译半个小时，并以失败告终。比起npm，我觉得cpan真的可以滚蛋。

我不禁想起一句话，不往npm里扔二进制的都是混蛋。

cpan同样

###2. perl是最难懂的语言

我在没接触perl的时候就有耳闻了。没想到会这么早碰到这傻语言。

不知道perl算不算弱类型。它只分单个变量，数组，hash，函数

可怕的是写数组要`@arr`而取里面的数则是`$arr[1]`。

hash也是如此`%hash = ()`,取数`$hash{'foo'}`;

这每次不同的前缀。以及不同的括号。正常人都不会对这个有好感的。

我对变量前面加美元符号特别反感。变量时最常用的，但是每次使用变量都要在前面按shift+4.你受得了受不了？

加上美元符号已经够丑了。还要加上`%`和`@`,引用则是`\`,

有时还会多个符号一起上。。美元符号大多会被规定为全局变量。有强迫症的人看到perl真的会晕。

比起js一个var走遍天下。实在是差远了。

###3. perl为什么有名

perl是常用的linux版本中自带的语言。

比shell要好用的多。

他出名的原因显然是因为强大的正则（或者说模式？我也不懂区别）

给linux服务器维护和测试的文本处理提供巨大的方便。

perl也支持CGI，显然perl的cgi也是一坨。

自动化处理或自动化测试也喜欢perl。

都说perl是懒人程序员喜欢的。

额。好吧，反正我接触没几天。暂且信了。

###4. perl中的小坑

1. switch
>非常棒的是，perl原生不支持switch。你得use Switch！
本来已经想好一百个吐槽perl的理由。当我发现perl不支持switch的时候，我发现我无力吐槽了。

2. substr
>`substr($str,index,offset);`第三个参数是offset，我特么搞了n久，被思维定势彻底害了。
不过为什么会这么搞？因为perl的函数是最蛋疼的。有时用神奇的`$_`传。
有时用放在参数中，连处理对象放开头还是末尾都搞不清，还会关注其他参数吗？
>> 总之我完全不用`$_`（正则除外），我无法理解这种设计思维。我觉得设计这个的人有病。

3. split
>哦,天啊，split居然是用模式当第一个参数的。支持个字符能死？

4. `$_`和`@_`
>这种大坑。不是精通perl的尽量少用。一个嵌套语句就搞不清这两宝贝变啥了。。

5. hash
> perl直接支持hash，这非常棒。可惜还是吐槽不能
>>+ perl的hash是真正的hash。输出的时候顺序是乱的。。而且如果不用另外一个数组记录顺序，貌似根本没办法照输入顺序输出。
>>+ hash的键值，我指value，只能是单个值`$`，而不能是数组或hash。
当然，要存hash或数组是可以的。用那该死的引用就行了`\`。嗯，这一下子限制了不知道多少功能，导致我写那个配置文件parser不得不使用eval。
>>+ 输出hash。这个太可怕了，就算你写了好几行想遍历输出，也不过输出第一层的键值，而且无排版，不得不use 一个 Dumper。。用dumper居然还是丑。

6. 单引号和双引号
> 这个坑绝壁每个人都碰到。因为

	>>+ `print $result.'\n';#居然是错的`

	>>+ `print $result."\n";#双引号才对`

7. eq 和 ==
> perl非常愚蠢的地方。数字可以==；字符串只能eq，还有一堆汇编的ne ge什么的。。保留字之多令人发指，这就像length()和scalar()一样可恶，都是取长度，为毛要两个函数？

###5. 为什么perl这么讨厌

+ 保留字太多。不过perl变量是有美元符号的。再多它也不怕。

+ 规则极度松散。
 >+ 小朋友来说说数组的四种写法(大笑)
 >+ 函数可以无括号也可以有括号。。

+ 使用大量奇葩的符号。`$,@,%` 一眼望去花花绿绿。

###6. 总结

通过perl，我意识到规则的重要性。perl规则众多，写法自由。也许它刚开始很厉害。但是只会妨碍新手阅读代码和学习。

golang虽然最近被黑，但是golang被称为最优雅的语言。显然是因为golang规则严格。

总之我虽然刚接触perl，但我已经闻到了perl的臭味。


