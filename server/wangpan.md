title:文件管理wangpan
tag:git nodejs
date:2013/1/30

一直想做个基于npm的文件管理，最好能跟svn和git一样。

有人说git这么好为啥不用，我当然用，不过我目前是做前端的，喜欢在windows上工作。

git当然也有windows版本。不过那个bash能看么。。而且git会导致windows点击右键极其卡顿。

总之，git是用在linux和mac上的。

不过做这个基于npm的小git也会遇到麻烦。

每个文件分key和value

key当然是文件名。这里文件名是包含路径的，这点必须要理解

比如sky.png在img目录下

那么他的key是img/sky.png而不是单纯的sky.png

文件的value当然是文件的binary数据。我们可以用md5表示

我尝试模范git

init命令在当前路径加入一个config文件。

push命令提交至远程服务器。

问题就出现了，用上面的命名法，如果我修改目录的名字，那那个目录不就所有文件都改了么。

这里就要考虑一个文件重命名，应该如何处理。

我这里说的远程服务器暂指oss，而oss居然没提供重命名的方法。

不过这也许是正确的，重新上传并删除源文件是我目前的选择

根据md5判断同一个文件并不能解决同一个md5对应多个文件的问题。

这个实在是令人郁闷，修改一下文件夹名字居然只能重传所有文件。

不知道以后能不能想到更好的方法